<!DOCTYPE html>
<html>
    <head>
        <title>Change Password | Taro Cards</title>
        <link rel="stylesheet" href="..\Global.css">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
        <script src="jquery-3.6.0.min.js"></script>
    </head>

    <body id="bodyChanges">
        <div class="titleCardChanges">
            <a href="Settings_HTML.html"><div id="back"><img src="C:\Users\jsmit\Documents\Taro Cards\tarocard\assets\Back.png" alt="back button"></div></a>
        </div>
        <br /> <br /> <br /> <br /> <br />

        <h1 id="updateHeading">Update your Password</h1>
        <h2 id="SuccessText">Password changed successfully</h2>
        <!-- # = Place holder-->
        <form action="#" method="POST" class="changeTemplate" autocomplete="off" onsubmit="return validate()">
            <label for="current"> Current Password: </label>
            <input name="currentPassword" id="current" type="password" required>
            <label for="new"> New Password: </label>
            <input name="newPassword" id="new" type="password" required>
            <label for="confirm"> Confirm Password: </label>
            <input name="confirmPassword" id="confirm" type="password"  required>
            <label style="top: 30px; font-size: 20px; left: 5%; " for="showPassword" > Show Password</label>
            <input type="submit" value="Save Changes" id="saveChanges">
        </form>

        <input type="checkbox" id="showPassword" name="showPassword">
        
        <script>
            let errorText = document.createElement("h3");
            errorText.id = "errorText"
            let h1 = document.querySelector("h1");
            h1.appendChild(errorText);
            function validate() {
                const form = document.querySelector("form");
                const newInput = form.querySelector("#new");
                const confirmInput = form.querySelector("#confirm");
                const currentInput = form.querySelector("#current");
                if(newInput.value === currentInput.value) {
                    errorText.textContent = "Alert: Your new password can't be the same as your old password";
                    return false;
                }
                if(newInput.value !== confirmInput.value ) {
                    errorText.textContent = "Alert: New and confirm password do not match";
                    return false;
                }
                return true;
            }

            const cp = document.getElementById("current");
            const np = document.getElementById("new");
            const conp = document.getElementById("confirm");
            const show = document.getElementById("showPassword");

            show.addEventListener("click", showPassword);

            function showPassword() {
                if (this.checked) {
                    cp.type = "text";
                    np.type = "text";
                    conp.type = "text";
                } else {
                    cp.type = "password";
                    np.type = "password";
                    conp.type = "password";
                }
            }
        </script>
    </body>
</html>