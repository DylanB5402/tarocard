<!DOCTYPE html>
<html>
    <head>
        <title>Change Password | Taro Cards</title>

        <link rel="icon" href="../assets/TaroCardTransparent 1.png">
        
        <link rel="preconnect" href="https://fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap" rel="stylesheet">
        <script src="../jquery-3.6.0.min.js"></script>

        <link rel="stylesheet" href="../temp.css">
    </head>

    <div class="page-header">
        <a href="Settings_HTML.html"><img src="../assets/Back.png" id="back"></a>
        <span>Password</span>
    </div>

    <body style="margin-top: 150px;">
        <div class="update">
            <div class="margin-update" id="passwordHeader">
                <h2>Update your password</h2>
                <p>Enter your current password to change it.</p>
                <h2 id="SuccessText">Password changed successfully</h2>
            </div>
        </div>

        <form action="/settings/update/password" method="POST" class="changeTemplate" autocomplete="off" onsubmit="return validate()" style="margin-top: 15px;">
            <div class="change-info">
                <div class="margin-update">
                    <label for="current-password">Current password</label>
                    <input
                        name="current-password"
                        class="settings-input"
                        id="current-password"
                        type="password"
                        placeholder="Current password"
                        required>
                        
                    <br>
                    <label for="new-password">New password</label>
                    <input
                        name="new-password"
                        class="settings-input"
                        id="new-password"
                        type="password"
                        placeholder="New password"
                        required>

                    <br>
                    <label for="confirm-password">Confirm password</label>
                    <input
                        name="confirm-password"
                        class="settings-input"
                        type="password"
                        id="confirm-password"
                        placeholder="Confirm new password"
                        required>
                    
                    <div class="checkbox-pwd">
                        <label for="showPassword"> Show Password</label>
                        <input
                            type="checkbox"
                            id="showPassword"
                            name="showPassword">
                    </div>
                    
                    <input type="submit" value="Save Changes" id="saveChanges">
                </div>
            </div>
        </form>
        




        
        
        <script>
            let errorText = document.createElement("p");
            errorText.id = "errorText"
            let div = document.querySelector("#passwordHeader")
            let lastP = div.querySelector("p");
            lastP.appendChild(errorText);
            function validate() {
                const form = document.querySelector("form");
                const currentInput = form.querySelector("#current-password");
                const newInput = form.querySelector("#new-password");
                const confirmInput = form.querySelector("#confirm-password");
                if(newInput.value === currentInput.value) {
                    errorText.textContent = "Alert: Your new password can't be the same as your old password";
                    return false;
                }
                if(newInput.value !== confirmInput.value ) {
                    errorText.textContent = "Alert: New and confirm password do not match";
                    return false;
                }
                return true;
            }

            const form = document.querySelector("form");
            
            const cp = form.querySelector("#current-password");
            const np = form.querySelector("#new-password");
            const conp = form.querySelector("#confirm-password");
            const show = form.querySelector("#showPassword");
            show.addEventListener("click", showPassword);


            function showPassword() {
                if (this.checked) {
                    cp.type = "text";
                    np.type = "text";
                    conp.type = "text";
                } else {
                    cp.type = "password";
                    np.type = "password";
                    conp.type = "password";
                }
            }
        </script>
    </body>
</html>

<!--
<h1 id="updateHeading">Update your Password</h1>
        # = Place holder
        <form action="#" method="POST" class="changeTemplate" autocomplete="off" onsubmit="return validate()">
            <label for="current"> Current Password: </label>
            <input name="currentPassword" id="current" type="password" required>
            <label for="new"> New Password: </label>
            <input name="newPassword" id="new" type="password" required>
            <label for="confirm"> Confirm Password: </label>
            <input name="confirmPassword" id="confirm" type="password"  required>
            <label style="top: 30px; font-size: 20px; left: 5%; " for="showPassword" > Show Password</label>
            <input type="submit" value="Save Changes" id="saveChanges">
        </form>

        <input type="checkbox" id="showPassword" name="showPassword">

-->

